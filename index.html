<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Phaser - Making your first game, part 1</title>
    <script type="text/javascript" src="js/phaser.min.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
    <script type="text/javascript">
        var game = new Phaser.Game(800, 600, Phaser.AUTO, "#game", {
            preload: preload,
            create: create,
            update: update
        });

        var player;
        var bullets;
        var enemies;
        var fireButton;

        function preload () {
          // game.load.sprite("bullet", )
        }

        function create() {
          // Configuration
          game.physics.startSystem(Phaser.Physics.ARCADE);

          // Controls
          fireButton = game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);

          // Sprites
          player = game.add.bitmapData(30, 30);
          player.ctx.beginPath();
          player.ctx.rect(0, 0, 30, 30);
          player.ctx.fillStyle = "#CCC";
          player.ctx.fill();

          // bullet = game.add.bitmapData(2, 2);
          // bullet.ctx.beginPath();
          // bullet.ctx.rect(0, 0, 2, 2);
          // bullet.ctx.fillStyle = "#FF0000";
          // bullet.ctx.fill();

          bullets = game.add.group();
          bullets.enableBody = true;
          bullets.physicsBodyType = Phaser.Physics.ARCADE;
          bullets.createMultiple(30, bullet);

          console.log(bullets);

          var playerSprite = game.add.sprite(game.world.width / 2, game.world.height / 2, player);
          game.physics.enable(playerSprite, Phaser.Physics.ARCADE);
        }

        function update () {
          if (fireButton.isDown) {
            console.warn("firing");
            fireBullet();
          }
        }

        function fireBullet () {
          bullet = bullets.getFirstExists(false);

          if (bullet) {
            bullet.reset(player.x, player.y + 8);
            bullet.body.velocity.y = -400;
          }
        }
    </script>
</head>
<body>
  <div id="game"></div>
</body>
</html>
